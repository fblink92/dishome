<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <body>
        <ui:composition template="/plantillas/template1.xhtml">
            
                <ui:define name="contenido">
                    <p:panel header="Login">
                        <h:panelGrid columns="1">
                            <h:outputLabel for="username" value="Usuario:" />
                            <p:inputText value="#{loginbean.username}" id="username" required="true" label="username"/>
                            <h:outputLabel for="password" value="Clave:" />
                            <p:password value="#{loginbean.password}" id="password" required="true"
                                        label="password" />
                            <f:facet name="footer">
                                <p:commandButton value="Login"
                                                 actionListener="#{loginbean.login}" update="growl"
                                                 oncomplete="manejarLogin(xhr, status, args)" />
                            </f:facet>
                        </h:panelGrid>
                    </p:panel>
                    </ui:define>
            

        </ui:composition>
        <script type="text/javascript">
            //<![CDATA[
            function manejarLogin(xhr, status, args) {
                if (!args.validationFailed && args.estaLogeado) {
                    setTimeout(function () {
                        window.location = args.view;
                    }, 500);
                }
            }
            //]]>
        </script>
    </body>
</html>
